---
title: DNSがよくわかる教科書 ch1
tags:
- DNS
- 勉強メモ
date: 2019-06-10T23:44:52+09:00
URL: https://wand-ta.hatenablog.com/entry/2019/06/10/234452
EditURL: https://blog.hatena.ne.jp/wand_ta/wand-ta.hatenablog.com/atom/entry/17680117127195090936
bibliography: https://www.sbcr.jp/products/4797394481.html?sku=4797394481
-------------------------------------


# IPアドレスと名前の関係

- ホスト
    - ネットワークに接続されているコンピューター諸々
        - サーバー
        - パソコン
        - スマホ
        - ルーター
- アドレッシング
    - 通信したい相手の指定
    - 通信してきた相手の判別
- ネーミング
    - 名前をつけ、アドレスと対応付ける
- 30年来...
    - アドレッシング: IPアドレス
    - ネーミング: DNS


# IPアドレスと名前の対応管理

- 昔話
- HOSTSファイル
    - 名前とIPアドレスとの対応表
- レジストリ
    - 名前や番号一元管理する組織
- インターネット黎明期は、SRI-NIC: Stanford Research Institute - Network Information Center がHOSTSファイルを一元管理していた
    

# 集中管理から分散管理へ

- 集中管理では申請をさばけなくなってきた
- 階層化と委任
    - 名前空間の一部分割し、信頼できる他者に**委任**
    - その名前空間の責任は委任された側が持つ
        - 責務を全うできない人や悪意を持った人がいるとうまくいかなくなる
    - ツリー構造
        - 各階層で名前が重複しないように管理する
        - ネットワーク全体で名前が重複しないことが保証される


# ドメイン名の構成

## ドメイン名とは何か


- ドメイン名とIPアドレスを適切に対応付けることでドメイン名はホストの**識別子**として使えるようになる
- ドメイン名
    - `www.example.jp`とか


## ドメイン名の構成

- `.`つなぎ
- ラベル
    - `.`で繋がれてるやつ
- ルート
    - 本当は`www.example.jp.`というようにドメイン名の最後にも`.`が付いている(通常は省略される)
    - 階層構造の頂点
    - ルート起点に、右から
        - TLD: Top Level Domain
            - jpとか
        - 2LD: Second-
            - exampleとか
        - 3LD: Third-
            - wwwとか
        - ...

## サブドメイン

- 部分木的な
- サブドメインの管理を委任するかどうかはサブドメイン切った人の自由
    - 【補】`co.jp`の`co`は委任してないってどこかで見た


## ドメイン名のメリット

- 各階層における名前付けの自由度が上がる
    - 社内の各課で`www`を自由に使える、とか


## コラム: ドメイン名における注意点

- ラベルの最大長63文字
- 英数字と`-`のみ
    - 国際化ドメイン名ではこの限りではない
- ignore-case
    


# ドメイン名を使えるようにするために生まれたDNS

## DNSとは何か

- DNS: Domain Name System
    - ドメイン名の導入前提
    - 階層化と委任による分散管理の仕組みを採用
- 名前解決
    - 利用者からの要求に応じてドメイン名に対応するIPアドレスを探し出す
        - 階層ごとに管理者に問い合わせて、委任をたどり、最終的な管理者からIPアドレスを聞き出す


## DNSにおける階層化と委任の仕組み

- ゾーン
    - 委任によって管理を任された範囲
- 親子
    - 親
        - 委任した人(委任元)
    - 子
        - 委任された人(委任先)
- ネームサーバー
    - ゾーン管理者が情報管理する
        - ドメイン名とIPアドレスとの対応付け
        - 委任の情報
            - 親が子の情報を管理する
            - 例: ルートは`jp`がどのネームサーバーで管理されているか知っている


# DNSとレジストリの関係

- 階層管理にしたことで、階層ごとにレジストリが必要になった
    - cf. 一元管理のころは、SRI-NICだけ
- 階層管理におけるレジストリの責務
    - 自分が委任されたゾーンの管理
    - ゾーンを委任する場合、委任先が誰であるかの管理
